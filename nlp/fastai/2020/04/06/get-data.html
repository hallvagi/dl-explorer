<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Finding a Norwegian language dataset for sentiment analysis | Deep learning explorer</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Finding a Norwegian language dataset for sentiment analysis" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="In this post I’ll try to find a Norwegian language dataset suitable for sentiment analysis. This dataset will be used in the upcoming posts to test various deep learning methods such as ULMFiT and MultiFiT. I will also experiment with the fastai2 deep learning library." />
<meta property="og:description" content="In this post I’ll try to find a Norwegian language dataset suitable for sentiment analysis. This dataset will be used in the upcoming posts to test various deep learning methods such as ULMFiT and MultiFiT. I will also experiment with the fastai2 deep learning library." />
<link rel="canonical" href="https://hallvagi.github.io/dl-explorer/nlp/fastai/2020/04/06/get-data.html" />
<meta property="og:url" content="https://hallvagi.github.io/dl-explorer/nlp/fastai/2020/04/06/get-data.html" />
<meta property="og:site_name" content="Deep learning explorer" />
<meta property="og:image" content="https://hallvagi.github.io/dl-explorer/images/some_folder/your_image.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-04-06T00:00:00-05:00" />
<script type="application/ld+json">
{"headline":"Finding a Norwegian language dataset for sentiment analysis","dateModified":"2020-04-06T00:00:00-05:00","datePublished":"2020-04-06T00:00:00-05:00","description":"In this post I’ll try to find a Norwegian language dataset suitable for sentiment analysis. This dataset will be used in the upcoming posts to test various deep learning methods such as ULMFiT and MultiFiT. I will also experiment with the fastai2 deep learning library.","mainEntityOfPage":{"@type":"WebPage","@id":"https://hallvagi.github.io/dl-explorer/nlp/fastai/2020/04/06/get-data.html"},"image":"https://hallvagi.github.io/dl-explorer/images/some_folder/your_image.png","@type":"BlogPosting","url":"https://hallvagi.github.io/dl-explorer/nlp/fastai/2020/04/06/get-data.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/dl-explorer/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://hallvagi.github.io/dl-explorer/feed.xml" title="Deep learning explorer" /><link rel="shortcut icon" type="image/x-icon" href="/dl-explorer/images/favicon.ico"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Finding a Norwegian language dataset for sentiment analysis | Deep learning explorer</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Finding a Norwegian language dataset for sentiment analysis" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="In this post I’ll try to find a Norwegian language dataset suitable for sentiment analysis. This dataset will be used in the upcoming posts to test various deep learning methods such as ULMFiT and MultiFiT. I will also experiment with the fastai2 deep learning library." />
<meta property="og:description" content="In this post I’ll try to find a Norwegian language dataset suitable for sentiment analysis. This dataset will be used in the upcoming posts to test various deep learning methods such as ULMFiT and MultiFiT. I will also experiment with the fastai2 deep learning library." />
<link rel="canonical" href="https://hallvagi.github.io/dl-explorer/nlp/fastai/2020/04/06/get-data.html" />
<meta property="og:url" content="https://hallvagi.github.io/dl-explorer/nlp/fastai/2020/04/06/get-data.html" />
<meta property="og:site_name" content="Deep learning explorer" />
<meta property="og:image" content="https://hallvagi.github.io/dl-explorer/images/some_folder/your_image.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-04-06T00:00:00-05:00" />
<script type="application/ld+json">
{"headline":"Finding a Norwegian language dataset for sentiment analysis","dateModified":"2020-04-06T00:00:00-05:00","datePublished":"2020-04-06T00:00:00-05:00","description":"In this post I’ll try to find a Norwegian language dataset suitable for sentiment analysis. This dataset will be used in the upcoming posts to test various deep learning methods such as ULMFiT and MultiFiT. I will also experiment with the fastai2 deep learning library.","mainEntityOfPage":{"@type":"WebPage","@id":"https://hallvagi.github.io/dl-explorer/nlp/fastai/2020/04/06/get-data.html"},"image":"https://hallvagi.github.io/dl-explorer/images/some_folder/your_image.png","@type":"BlogPosting","url":"https://hallvagi.github.io/dl-explorer/nlp/fastai/2020/04/06/get-data.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet" />
<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css"><link type="application/atom+xml" rel="alternate" href="https://hallvagi.github.io/dl-explorer/feed.xml" title="Deep learning explorer" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
    <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"> </script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head><body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/dl-explorer/">Deep learning explorer</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/dl-explorer/about/">About</a><a class="page-link" href="/dl-explorer/search/">Search</a><a class="page-link" href="/dl-explorer/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Finding a Norwegian language dataset for sentiment analysis</h1><p class="page-description">In this post I&#39;ll try to find a Norwegian language dataset suitable for sentiment analysis. This dataset will be used in the upcoming posts to test various deep learning methods such as ULMFiT and MultiFiT. I will also experiment with the fastai2 deep learning library.</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2020-04-06T00:00:00-05:00" itemprop="datePublished">
        Apr 6, 2020
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      15 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/dl-explorer/categories/#NLP">NLP</a>
        &nbsp;
      
        <a class="category-tags-link" href="/dl-explorer/categories/#fastai">fastai</a>
        
      
      </p>
    

    
      
        <div class="pb-5 d-flex flex-wrap flex-justify-end">
          <div class="px-2">

    <a href="https://github.com/hallvagi/dl-explorer/tree/master/_notebooks/2020-04-06-get-data.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/dl-explorer/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/hallvagi/dl-explorer/master?filepath=_notebooks%2F2020-04-06-get-data.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/dl-explorer/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/hallvagi/dl-explorer/blob/master/_notebooks/2020-04-06-get-data.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/dl-explorer/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#The-NOREC-dataset">The NOREC dataset </a></li>
<li class="toc-entry toc-h2"><a href="#Inspect-the-metadata">Inspect the metadata </a></li>
<li class="toc-entry toc-h2"><a href="#Get-a-subset-of-the-data">Get a subset of the data </a></li>
<li class="toc-entry toc-h2"><a href="#Add-text-to-the-data-frame">Add text to the data frame </a></li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2020-04-06-get-data.ipynb
-->

<div class="container" id="notebook-container">
        
    
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I'm currently taking the fast.ai online course practical deep learning for coders (to be released publicly in July 2020). As part of the studies I want to explore the fastai2 deep learning library. I will do so by testing various NLP methods.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Over the next few posts I'll got through the entire process of finding and processing data, training various models and also interpret the results. I'll try to highlight the various things I've been struggling with or confused about. I think writing short blog posts such as these are a great way of learning new material.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="The-NOREC-dataset">
<a class="anchor" href="#The-NOREC-dataset" aria-hidden="true"><span class="octicon octicon-link"></span></a>The NOREC dataset<a class="anchor-link" href="#The-NOREC-dataset"> </a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I wanted to find a dataset in my native Norwegian to analyze. NLP for languages other than English is often challenging, even though many new techniques are addressing this. After a bit of searching I found the <a href="https://github.com/ltgoslo/norec">Norec dataset</a>. It contains Norwegian language reviews of various films, music etc. The dataset even comes with a <a href="http://www.lrec-conf.org/proceedings/lrec2018/pdf/851.pdf">paper</a> that explains the setup of the data! This seems like a great case study, and is similar to the IMDB movie review sentiment analyses, which is one of the built in datasets of the fastai2 library.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The repo includes a utility library and a download.sh script. This is what you normally would want to use to ease the process of actually getting the data, but in this case I would like to do things manually. We'll be using the fastai2 library (which upon release will be renamed to fastai).</p>
<p>Note that <code>import *</code> is usually not encouraged, but the fastai2 library has defined it's __all__ variables properly, so this won't be a problem. See <a href="https://github.com/fastai/fastai2/blob/master/fastai2/imports.py">this file</a> for the various imports that is part of the library.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">fastai2.text.all</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I'm using fastai2 '0.0.17' and fastcore '0.1.17'. To check the version you can uncomment the following lines:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<details class="description">
      <summary class="btn btn-sm" data-open="Hide Code" data-close="Show Code"></summary>
        <p></p>
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#collapse</span>
<span class="c1"># import fastai2, fastcore</span>
<span class="c1"># fastai2.__version__, fastcore.__version__</span>
</pre></div>

    </div>
</div>
</div>

    </details>
</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>First we'll download and extract the data from the <code>url</code> given in the download.sh file in the github-repo to a <code>dest</code> with <code>archive_name</code>. Note the <code>!command</code> syntax which runs the corresponding wget shell command. The wget command only has to be run once.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">'http://folk.uio.no/eivinabe/norec-1.0.1.tar.gz'</span>
<span class="n">data_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">'~/.fastai'</span><span class="p">)</span>
<span class="n">dest</span> <span class="o">=</span> <span class="n">data_path</span><span class="o">/</span><span class="s1">'archive'</span>
<span class="n">archive_name</span> <span class="o">=</span> <span class="s1">'norec.tar.gz'</span>
<span class="o">!</span>wget <span class="o">{</span>url<span class="o">}</span> -O <span class="o">{</span>dest/archive_name<span class="o">}</span> -q
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Then we'll extract the archive with the tarfile library (imported via the fastai2 import at the beginning of the notebook). We'll extract from the archive location to <code>data</code>. Finally we set a new <code>path</code> that points to this location.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tarfile</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">dest</span><span class="o">/</span><span class="n">archive_name</span><span class="p">)</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">data_path</span><span class="o">/</span><span class="s1">'data'</span><span class="p">)</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">data_path</span><span class="o">/</span><span class="s1">'data/norec'</span>
<span class="n">Path</span><span class="o">.</span><span class="n">BASE_PATH</span><span class="o">=</span><span class="n">path</span> <span class="c1"># this avoids printing the entire file-path when we list files in a directory</span>
<span class="n">path</span><span class="o">.</span><span class="n">ls</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(#4) [Path('metadata.json'),Path('conllu.tar.gz'),Path('html.tar.gz'),Path('README.txt')]</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The archive contains a .json file with metadata, and among other, a html.tar.gz archive with our desired raw texts. We'll 
extract this archive too. The conllu.tar.gz contains tokenized and filtered text, and we don't need this for the time being.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tarfile</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="o">/</span><span class="s1">'html.tar.gz'</span><span class="p">)</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="n">path</span><span class="o">.</span><span class="n">ls</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(#5) [Path('metadata.json'),Path('conllu.tar.gz'),Path('html.tar.gz'),Path('html'),Path('README.txt')]</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The extracted archive is now in the <code>data/norec/html</code> folder, which contains the train, dev (we'll call it validation) and test split.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="p">(</span><span class="n">path</span><span class="o">/</span><span class="s1">'html'</span><span class="p">)</span><span class="o">.</span><span class="n">ls</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(#3) [Path('html/train'),Path('html/test'),Path('html/dev')]</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Inspect-the-metadata">
<a class="anchor" href="#Inspect-the-metadata" aria-hidden="true"><span class="octicon octicon-link"></span></a>Inspect the metadata<a class="anchor-link" href="#Inspect-the-metadata"> </a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's inspect the metatdata file and see if we are able to make sense of the data. But what does this json file look like? We can use the <code>head</code> command to have a look at the raw file contents before we attempt to read it into a pandas dataframe:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>head -n <span class="m">20</span> <span class="o">{</span>path/<span class="s1">'metadata.json'</span><span class="o">}</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>{
  "000000": {
    "authors": [
      "Birger Vestmo"
    ],
    "category": "screen",
    "day": 27,
    "excerpt": "Toppen innen tv-drama akkurat nå!",
    "id": 0,
    "language": "nb",
    "month": 9,
    "rating": 6,
    "source": "p3",
    "source-category": "tv",
    "source-id": 74781,
    "source-tags": [],
    "split": "train",
    "tags": [
      "tv"
    ],
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's try to read the data with pandas default <code>read_json()</code></p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">path</span><span class="o">/</span><span class="s1">'metadata.json'</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>7</th>
      <th>8</th>
      <th>9</th>
      <th>...</th>
      <th>705136</th>
      <th>705137</th>
      <th>705138</th>
      <th>705139</th>
      <th>705140</th>
      <th>705141</th>
      <th>705142</th>
      <th>705143</th>
      <th>705144</th>
      <th>705145</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>authors</th>
      <td>[Birger Vestmo]</td>
      <td>[Birger Vestmo]</td>
      <td>[Birger Vestmo]</td>
      <td>[Birger Vestmo]</td>
      <td>[Birger Vestmo]</td>
      <td>[Torfinn Borkhus]</td>
      <td>[Torfinn Borkhus]</td>
      <td>[Torfinn Borkhus]</td>
      <td>[Torfinn Borkhus]</td>
      <td>[Torfinn Borkhus]</td>
      <td>...</td>
      <td>[Arnfinn Bø-Rygg]</td>
      <td>[Leif Tore Lindø]</td>
      <td>[Leif Tore Lindø]</td>
      <td>[Kine Hult]</td>
      <td>[Arnfinn Bø-Rygg]</td>
      <td>[Leif Tore Lindø]</td>
      <td>[Arnfinn Bø-Rygg]</td>
      <td>[Leif Tore Lindø]</td>
      <td>[Leif Tore Lindø]</td>
      <td>[Elisabeth Bie]</td>
    </tr>
    <tr>
      <th>category</th>
      <td>screen</td>
      <td>screen</td>
      <td>screen</td>
      <td>screen</td>
      <td>screen</td>
      <td>screen</td>
      <td>screen</td>
      <td>screen</td>
      <td>screen</td>
      <td>screen</td>
      <td>...</td>
      <td>music</td>
      <td>music</td>
      <td>music</td>
      <td>music</td>
      <td>music</td>
      <td>music</td>
      <td>music</td>
      <td>music</td>
      <td>music</td>
      <td>music</td>
    </tr>
    <tr>
      <th>day</th>
      <td>27</td>
      <td>22</td>
      <td>22</td>
      <td>3</td>
      <td>9</td>
      <td>25</td>
      <td>25</td>
      <td>26</td>
      <td>1</td>
      <td>8</td>
      <td>...</td>
      <td>8</td>
      <td>16</td>
      <td>13</td>
      <td>13</td>
      <td>3</td>
      <td>8</td>
      <td>4</td>
      <td>17</td>
      <td>25</td>
      <td>9</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 35189 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Not quite what we looked for! From the read_json documentation we see that we can change the orientation of the data with the <code>orient</code>option. 'index' seems to be what we look for. Note that we also could have transposed the data frame for a similar result.</p>
<p>There is another problem that is harder to spot: The index of our dataframe should be the string representation of the json key. This is the actual file name of the corresponding review, but it is cast to an <code>int</code>. This turns '000000' into 0. So we'll set <code>convert_axes</code> to <code>False</code>. We'll also reset the index and rename it to <code>filename</code>.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">path</span><span class="o">/</span><span class="s1">'metadata.json'</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">'index'</span><span class="p">,</span> <span class="n">convert_axes</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">'index'</span><span class="p">:</span> <span class="s1">'filename'</span><span class="p">})</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>filename</th>
      <th>authors</th>
      <th>category</th>
      <th>day</th>
      <th>excerpt</th>
      <th>id</th>
      <th>language</th>
      <th>month</th>
      <th>rating</th>
      <th>source</th>
      <th>source-category</th>
      <th>source-id</th>
      <th>source-tags</th>
      <th>split</th>
      <th>tags</th>
      <th>title</th>
      <th>url</th>
      <th>year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>000000</td>
      <td>[Birger Vestmo]</td>
      <td>screen</td>
      <td>27</td>
      <td>Toppen innen tv-drama akkurat nå!</td>
      <td>0</td>
      <td>nb</td>
      <td>9</td>
      <td>6</td>
      <td>p3</td>
      <td>tv</td>
      <td>74781</td>
      <td>[]</td>
      <td>train</td>
      <td>[tv]</td>
      <td>Rome S02</td>
      <td>http://p3.no/filmpolitiet/rome-02</td>
      <td>2007</td>
    </tr>
    <tr>
      <th>1</th>
      <td>000001</td>
      <td>[Birger Vestmo]</td>
      <td>screen</td>
      <td>22</td>
      <td>Gull for &lt;em&gt;Twin Peaks&lt;/em&gt;-fans!</td>
      <td>1</td>
      <td>nb</td>
      <td>11</td>
      <td>6</td>
      <td>p3</td>
      <td>tv</td>
      <td>74065</td>
      <td>[]</td>
      <td>train</td>
      <td>[tv]</td>
      <td>Twin Peaks - definitive gold box edition</td>
      <td>http://p3.no/filmpolitiet/twin-peaks-definitive-gold-box-edition</td>
      <td>2007</td>
    </tr>
    <tr>
      <th>2</th>
      <td>000002</td>
      <td>[Birger Vestmo]</td>
      <td>screen</td>
      <td>22</td>
      <td>The Wire vil gjøre deg avhengig, men på en god måte.</td>
      <td>2</td>
      <td>nb</td>
      <td>2</td>
      <td>6</td>
      <td>p3</td>
      <td>tv</td>
      <td>73886</td>
      <td>[]</td>
      <td>train</td>
      <td>[tv]</td>
      <td>The Wire (sesong 1-4)</td>
      <td>http://p3.no/filmpolitiet/the-wire-sesong-1-4</td>
      <td>2008</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>There are several category-like columns as explained in the paper. We will use the <code>category</code> column.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">'category'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>screen         13085
music          12410
literature      3526
products        3120
games           1765
restaurants      534
stage            530
sports           117
misc             102
Name: category, dtype: int64</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I'm also curious about the distribution of <a href="https://en.wikipedia.org/wiki/Bokm%C3%A5l">bokmål</a> (nb) vs <a href="https://en.wikipedia.org/wiki/Nynorsk">nynorsk</a> (nn). It seems the vast majority of reviews are in bokmål.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">'language'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>nb    34656
nn      533
Name: language, dtype: int64</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Get-a-subset-of-the-data">
<a class="anchor" href="#Get-a-subset-of-the-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Get a subset of the data<a class="anchor-link" href="#Get-a-subset-of-the-data"> </a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We'll proceed with a subset of the data. We'll look at the <strong>screen</strong> sub category and <strong>bokmål</strong> (nb) language. The screen category contains both movie and TV-reviews. The data frame also contains several columns we won't be using now so let's select the relevant columns. We're left with ~ 13000 reviews.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">screen</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">'category'</span><span class="p">]</span><span class="o">==</span><span class="s1">'screen'</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">'language'</span><span class="p">]</span><span class="o">==</span><span class="s1">'nb'</span><span class="p">)]</span>
<span class="n">screen</span> <span class="o">=</span> <span class="n">screen</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s1">'filename'</span><span class="p">,</span> <span class="s1">'rating'</span><span class="p">,</span> <span class="s1">'title'</span><span class="p">,</span> <span class="s1">'split'</span><span class="p">]]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">screen</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">screen</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>(12924, 4)
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>filename</th>
      <th>rating</th>
      <th>title</th>
      <th>split</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>000000</td>
      <td>6</td>
      <td>Rome S02</td>
      <td>train</td>
    </tr>
    <tr>
      <th>1</th>
      <td>000001</td>
      <td>6</td>
      <td>Twin Peaks - definitive gold box edition</td>
      <td>train</td>
    </tr>
    <tr>
      <th>2</th>
      <td>000002</td>
      <td>6</td>
      <td>The Wire (sesong 1-4)</td>
      <td>train</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's also change the filename so that is gives the path to our review files.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">screen</span><span class="p">[</span><span class="s1">'filename'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'html/'</span><span class="o">+</span><span class="n">screen</span><span class="p">[</span><span class="s1">'split'</span><span class="p">]</span><span class="o">+</span><span class="s1">'/'</span><span class="o">+</span><span class="n">screen</span><span class="p">[</span><span class="s1">'filename'</span><span class="p">]</span><span class="o">+</span><span class="s1">'.html'</span>
<span class="n">screen</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>filename</th>
      <th>rating</th>
      <th>title</th>
      <th>split</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>21438</th>
      <td>html/train/301590.html</td>
      <td>4</td>
      <td>På den smale sykkelsti</td>
      <td>train</td>
    </tr>
    <tr>
      <th>28588</th>
      <td>html/train/600841.html</td>
      <td>4</td>
      <td>Lykken er en olivenlund</td>
      <td>train</td>
    </tr>
    <tr>
      <th>32395</th>
      <td>html/test/702352.html</td>
      <td>5</td>
      <td>Sterk, sanselig skjønnhet fra Aldomóvar</td>
      <td>test</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The ratings of the screen category has a slight positive skew.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">screen</span><span class="p">[</span><span class="s1">'rating'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">'bar'</span><span class="p">);</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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%0A">
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We'll encode a rating of 1 to 3 as negative, and 5 and 6 as positive. Reviews rated 4 will be removed. We'll lose a bit of data this way, but this means that the positive and negative review are a bit more distinct, and will make down stream classification a bit simpler. This leaves us with ~8600 reviews.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">screen</span> <span class="o">=</span> <span class="n">screen</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">screen</span><span class="p">[</span><span class="s1">'rating'</span><span class="p">]</span><span class="o">!=</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">screen</span><span class="p">[</span><span class="s1">'sentiment'</span><span class="p">]</span><span class="o">=</span><span class="n">screen</span><span class="p">[</span><span class="s1">'rating'</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">k</span><span class="p">:</span> <span class="s1">'positive'</span> <span class="k">if</span> <span class="n">k</span><span class="o">&gt;=</span><span class="mi">4</span> <span class="k">else</span> <span class="s1">'negative'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">screen</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">screen</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>(8613, 5)
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>filename</th>
      <th>rating</th>
      <th>title</th>
      <th>split</th>
      <th>sentiment</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>html/train/000000.html</td>
      <td>6</td>
      <td>Rome S02</td>
      <td>train</td>
      <td>positive</td>
    </tr>
    <tr>
      <th>1</th>
      <td>html/train/000001.html</td>
      <td>6</td>
      <td>Twin Peaks - definitive gold box edition</td>
      <td>train</td>
      <td>positive</td>
    </tr>
    <tr>
      <th>2</th>
      <td>html/train/000002.html</td>
      <td>6</td>
      <td>The Wire (sesong 1-4)</td>
      <td>train</td>
      <td>positive</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The train, validation (dev) and test split is ok:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">screen</span><span class="p">[</span><span class="s1">'split'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>train    0.803321
dev      0.101707
test     0.094973
Name: split, dtype: float64</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>And the dataset is well balanced, i.e. similar amount of labels for each class.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">screen</span><span class="p">[</span><span class="s1">'sentiment'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>negative    0.512713
positive    0.487287
Name: sentiment, dtype: float64</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Add-text-to-the-data-frame">
<a class="anchor" href="#Add-text-to-the-data-frame" aria-hidden="true"><span class="octicon octicon-link"></span></a>Add text to the data frame<a class="anchor-link" href="#Add-text-to-the-data-frame"> </a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's also add the full text to the dataframe for convenience. This step is not strictly necessary, and doesn't scale to big data. The <code>html/train</code> folder contains html files, and the data frame gives us our filenames.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="p">(</span><span class="n">path</span><span class="o">/</span><span class="s1">'html/train'</span><span class="p">)</span><span class="o">.</span><span class="n">ls</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(#28158) [Path('html/train/201232.html'),Path('html/train/601043.html'),Path('html/train/108030.html'),Path('html/train/700390.html'),Path('html/train/702069.html'),Path('html/train/100023.html'),Path('html/train/701430.html'),Path('html/train/201765.html'),Path('html/train/302012.html'),Path('html/train/400836.html')...]</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">screen</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>filename</th>
      <th>rating</th>
      <th>title</th>
      <th>split</th>
      <th>sentiment</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>html/train/000000.html</td>
      <td>6</td>
      <td>Rome S02</td>
      <td>train</td>
      <td>positive</td>
    </tr>
    <tr>
      <th>1</th>
      <td>html/train/000001.html</td>
      <td>6</td>
      <td>Twin Peaks - definitive gold box edition</td>
      <td>train</td>
      <td>positive</td>
    </tr>
    <tr>
      <th>2</th>
      <td>html/train/000002.html</td>
      <td>6</td>
      <td>The Wire (sesong 1-4)</td>
      <td>train</td>
      <td>positive</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's inspect the second file in the data frame. We expect it should be a review of Twin Peaks. We'll open the file and print the raw contents.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">fn</span> <span class="o">=</span> <span class="n">screen</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'filename'</span><span class="p">]</span>
<span class="n">item</span> <span class="o">=</span> <span class="p">(</span><span class="n">path</span><span class="o">/</span><span class="n">fn</span><span class="p">)</span>
<span class="n">item</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Path('html/train/000001.html')</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> 
    <span class="n">review</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">review</span><span class="p">[:</span><span class="mi">1500</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>'&lt;h1&gt;Twin Peaks - definitive gold box edition&lt;/h1&gt;\n\n&lt;p&gt;Tv-serien &lt;em&gt;Twin Peaks&lt;/em&gt;, skapt av David Lynch og Mark Frost, trollbandt publikum på starten av 1990-tallet. Nå er begge sesongene samlet på DVD i en såkalt ”definitive gold box edition” som viser at serien ikke har mistet noe av appellen.&lt;/p&gt;\n\n&lt;p&gt;Det eneste som egentlig røper alderen, er at serien ikke er i widescreen, og at flere av skuespillerne fremdeles er unge og vakre. 17 år etter premieren har de falmet, som mennesker gjør, men &lt;em&gt;Twin Peaks&lt;/em&gt; sikrer dem evig liv.&lt;/p&gt;\n\n&lt;h5&gt;Mørke hemmeligheter&lt;/h5&gt;\n\n&lt;p&gt;Serien handler om et mordmysterium i den lille byen &lt;em&gt;Twin Peaks&lt;/em&gt;, et sted langs USAs grense til Canada. Unge, vakre Laura Palmer blir funnet drept, og FBI-etterforsker Dale Cooper kommer til byen for å oppklare saken.&lt;/p&gt;\n\n&lt;p&gt;Her blir han betatt av det tilsynelatende enkle livet i den lille byen mellom den endeløse skogen og de høye fjellene. Men han oppdager også at byen skjuler mørke, farlige hemmeligheter.&lt;/p&gt;\n\n&lt;REMOVE&gt;&lt;small&gt;Anmeldelsen fortsetter under bildet.&lt;/small&gt;&lt;/REMOVE&gt;\n\n&lt;REMOVE&gt;[caption id="attachment_207347" align="alignnone" width="750"]&lt;a href="http://p3.no/filmpolitiet/wp-content/uploads/2015/01/twinpeaks.jpg"&gt;&lt;img src="http://p3.no/filmpolitiet/wp-content/uploads/2015/01/twinpeaks-750x421.jpg" alt="Kyle MacLachlan som Dale Cooper og Sherilyn Fenn som Audrey Horne i Twin Peaks. (Foto: Lynch/Frost Productions)" width="750" height="421" class="size-medium wp-image-207347" /&gt;&lt;/a&gt; Kyle Mac'</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The data contains normal text but also several html-tags. The REMOVE tag was added by the authors of the dataset to tag unwanted text such as image captions. In general we want to keep our text as intact as possible, but some text is clearly noise. So we'll proceed to get rid of the REMOVE tags and titles. The norec <a href="https://github.com/ltgoslo/norec/blob/master/src/norec/main.py">repo</a> contains a method to do this with the lxml library. We'll change the code slightly to also remove headers.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">lxml.html</span> <span class="kn">import</span> <span class="n">fragments_fromstring</span>

<span class="k">def</span> <span class="nf">html_to_text</span><span class="p">(</span><span class="n">html</span><span class="p">):</span> 
    <span class="k">return</span> <span class="s1">' '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">text_content</span><span class="p">()</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">fragments_fromstring</span><span class="p">(</span><span class="n">html</span><span class="p">)</span> <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s1">'p'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">html_to_text</span><span class="p">(</span><span class="n">review</span><span class="p">)[:</span><span class="mi">1500</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>'Tv-serien Twin Peaks, skapt av David Lynch og Mark Frost, trollbandt publikum på starten av 1990-tallet. Nå er begge sesongene samlet på DVD i en såkalt ”definitive gold box edition” som viser at serien ikke har mistet noe av appellen. Det eneste som egentlig røper alderen, er at serien ikke er i widescreen, og at flere av skuespillerne fremdeles er unge og vakre. 17 år etter premieren har de falmet, som mennesker gjør, men Twin Peaks sikrer dem evig liv. Serien handler om et mordmysterium i den lille byen Twin Peaks, et sted langs USAs grense til Canada. Unge, vakre Laura Palmer blir funnet drept, og FBI-etterforsker Dale Cooper kommer til byen for å oppklare saken. Her blir han betatt av det tilsynelatende enkle livet i den lille byen mellom den endeløse skogen og de høye fjellene. Men han oppdager også at byen skjuler mørke, farlige hemmeligheter. Twin Peaks holder seg overraskende godt. Historien glir nok litt ut i det absurde i sesong 2, mens sesong 1 er en udiskutabel klassiker. Serien kjører en tilnærmet tidløs stil som idoliserer 50-talls-looken som David Lynch også dyrket i filmen ”Wild at heart” fra samme periode. Handlingen er fremdeles mørk og truende, samtidig som den har en merkelig form for humor, som regel fortalt gjennom Dale Cooper, glimrende spilt av en opplagt Kyle MacLachlan. Twin Peaks har et omfattende galleri av merkelige figurer. Men de er klart definerte, og spenner over et vidt spekter, fra søte Donna, til mystiske Log Lady til yppige Audrey Horn. F'</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>That looks much better! Now lets combine the two methods to make a function to easily get html reviews from a file name</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_review</span><span class="p">(</span><span class="n">fn</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> 
        <span class="k">return</span><span class="p">(</span><span class="n">html_to_text</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">get_review</span><span class="p">(</span><span class="n">item</span><span class="p">)[:</span><span class="mi">1500</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>'Tv-serien Twin Peaks, skapt av David Lynch og Mark Frost, trollbandt publikum på starten av 1990-tallet. Nå er begge sesongene samlet på DVD i en såkalt ”definitive gold box edition” som viser at serien ikke har mistet noe av appellen. Det eneste som egentlig røper alderen, er at serien ikke er i widescreen, og at flere av skuespillerne fremdeles er unge og vakre. 17 år etter premieren har de falmet, som mennesker gjør, men Twin Peaks sikrer dem evig liv. Serien handler om et mordmysterium i den lille byen Twin Peaks, et sted langs USAs grense til Canada. Unge, vakre Laura Palmer blir funnet drept, og FBI-etterforsker Dale Cooper kommer til byen for å oppklare saken. Her blir han betatt av det tilsynelatende enkle livet i den lille byen mellom den endeløse skogen og de høye fjellene. Men han oppdager også at byen skjuler mørke, farlige hemmeligheter. Twin Peaks holder seg overraskende godt. Historien glir nok litt ut i det absurde i sesong 2, mens sesong 1 er en udiskutabel klassiker. Serien kjører en tilnærmet tidløs stil som idoliserer 50-talls-looken som David Lynch også dyrket i filmen ”Wild at heart” fra samme periode. Handlingen er fremdeles mørk og truende, samtidig som den har en merkelig form for humor, som regel fortalt gjennom Dale Cooper, glimrende spilt av en opplagt Kyle MacLachlan. Twin Peaks har et omfattende galleri av merkelige figurer. Men de er klart definerte, og spenner over et vidt spekter, fra søte Donna, til mystiske Log Lady til yppige Audrey Horn. F'</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Finally we append the review text to our data frame, and save it for future use.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">screen</span><span class="p">[</span><span class="s1">'text'</span><span class="p">]</span> <span class="o">=</span> <span class="n">screen</span><span class="p">[</span><span class="s1">'filename'</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">o</span><span class="p">:</span> <span class="n">get_review</span><span class="p">(</span><span class="n">path</span><span class="o">/</span><span class="n">o</span><span class="p">))</span>
<span class="n">screen</span><span class="o">.</span><span class="n">to_feather</span><span class="p">(</span><span class="n">path</span><span class="o">/</span><span class="s1">'norec_df'</span><span class="p">)</span>
<span class="n">screen</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>filename</th>
      <th>rating</th>
      <th>title</th>
      <th>split</th>
      <th>sentiment</th>
      <th>text</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>html/train/000000.html</td>
      <td>6</td>
      <td>Rome S02</td>
      <td>train</td>
      <td>positive</td>
      <td>Den andre og siste sesongen av Rome er ute på DVD i Norge. Om du så sesong 1, vet du at du har noe stort i vente. Har du aldri sett Rome før, stikk ut og kjøp begge sesongene. Dette er nemlig en av verdens beste tv-serier, og etter å ha sett de fire første episodene av sesong 2, konstaterer jeg at kvaliteten ser ut til å holde seg på et nesten overraskende høyt nivå! Sesong 2 starter nøyaktig der sesong 1 sluttet. Julius Cæsar ligger myrdet i Senatet og Lucius Vorenus hulker over liket av Neobie. Så blir historien enda mørkere. Marcus Antonius tar over styringen av Roma, men utfordres fra ...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>html/train/000001.html</td>
      <td>6</td>
      <td>Twin Peaks - definitive gold box edition</td>
      <td>train</td>
      <td>positive</td>
      <td>Tv-serien Twin Peaks, skapt av David Lynch og Mark Frost, trollbandt publikum på starten av 1990-tallet. Nå er begge sesongene samlet på DVD i en såkalt ”definitive gold box edition” som viser at serien ikke har mistet noe av appellen. Det eneste som egentlig røper alderen, er at serien ikke er i widescreen, og at flere av skuespillerne fremdeles er unge og vakre. 17 år etter premieren har de falmet, som mennesker gjør, men Twin Peaks sikrer dem evig liv. Serien handler om et mordmysterium i den lille byen Twin Peaks, et sted langs USAs grense til Canada. Unge, vakre Laura Palmer blir funn...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>html/train/000002.html</td>
      <td>6</td>
      <td>The Wire (sesong 1-4)</td>
      <td>train</td>
      <td>positive</td>
      <td>I neste uke kommer sesong 5 av tv-serien ”The Wire” på DVD. 2008 har for meg vært sterkt preget av denne serien. Hjemme hos oss begynte vi med sesong 1 i vår. Da hadde jeg i lengre tid hørt panegyriske lovord om serien fra både venner og media. Vi ble også fanget av skildringene av purk og skurk i Baltimore, og pløyde oss igjennom alt til og med sesong 4 på sensommeren. Jeg vil ikke gå så langt som å kalle det ”verdens beste serie”, som noen har gjort, men det er ingen tvil om at dette er noe av det bedre som er blitt vist på tv! Serien forteller om en gruppe politietterforskere som samles...</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I will use this dataset in future posts to explore various NLP techniques. In the upcoming post we will see if we are able to train a <a href="https://nlp.fast.ai/classification/2018/05/15/introducing-ulmfit.html">ULMFiT</a> classifier on this dataset, and see how it compares to the results for the similar english <a href="https://paperswithcode.com/sota/sentiment-analysis-on-imdb">IMDB-dataset</a>. I also hope to test <a href="https://nlp.fast.ai/classification/2019/09/10/multifit.html">MultiFiT</a> in a later post.</p>

</div>
</div>
</div>
</div>



  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="hallvagi/dl-explorer"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/dl-explorer/nlp/fastai/2020/04/06/get-data.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/dl-explorer/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/dl-explorer/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/dl-explorer/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Exploring deep learning and data science concepts.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/hallvagi" title="hallvagi"><svg class="svg-icon grey"><use xlink:href="/dl-explorer/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/HallvarGisnas" title="HallvarGisnas"><svg class="svg-icon grey"><use xlink:href="/dl-explorer/assets/minima-social-icons.svg#twitter"></use></svg></a></li><li><a rel="me" href="https://www.youtube.com/c%2FHallvarGisn%C3%A5s" title="c/HallvarGisnås"><svg class="svg-icon grey"><use xlink:href="/dl-explorer/assets/minima-social-icons.svg#youtube"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
